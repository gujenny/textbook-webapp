Find My Textbook

The first feature I tried to implement was "register". I wanted each user to give their college, so that I could use that information to calculate their distance relative to other schools and filter their book search results depending on their proximity. I did not want users personally typing in their school name because that allows for typos and other errors. For example, a user may write "UVA" instead of "University of Virginia", potentially causing complications. Therefore, I found a database (https://nces.ed.gov/ipeds/use-the-data) that gave me a csv file of secondary schools and their location. In application.py, I read the csv file and use it to create a dictionary, called SCHOOLS, of the school names (key) and their latitude and longitude (values). I could pass SCHOOLS into “register.html” and output a dropdown select menu with the possible school options users could select and eliminating any possibility of typos. Because there were a lot of schools, I wanted to make it easier for the user to find the school they were looking for in the dropdown menu, so I used Select2 to implement a dropdown menu with a search option. Finally, for the user to register, I ask that they provide an email address. However, I wanted to make sure that the email they submit is valid, so for the input, I set 'type="email"'. I also had the server check if the email had the correct format using validate_email.

The next feature I implemented was "sell". While I considered letting the user type in their own book title, author, etc., I thought that it would eventually lead to typos and errors. Therefore, I used Google Books API. Google Books API let me input an ISBN number and return data on the book. I used “requests.get” to get the information from Google Books and used .json() to get the data in JSON format. Then, I could find the specific information I wanted, such as "author" and "title", and store it in the books SQL table. There are no risks of typos. In the "sell" option, users can also choose to upload a cover picture of their book, such as a picture of the actual book that potential buyers can use to assess the quality. However, the picture is optional. When the user submits a picture, the picture is stored in ./static/cover. However, I did not want to save the pictures under their original name in case two different cover pictures with the same name get submitted. Therefore, I renamed the file to BOOK_ID.FILETYPE. In order to retrieve the original file type, I used FILENAME.rsplit(‘.’, 1)[1]. This returns jpg, png, etc. Then, I updated the books table to store the cover image name, making it easier to retrieve the cover image later. If the user chose not to submit a cover photo, however, then there is a "pass" and the program does nothing.

The "Browse Books" function allows users to search for books within a certain distance from them. When searching for the book, the user can search for either the book title, author, or ISBN number. I wanted the search function to not have to be precise. For example, if the title of the book was "Sapiens: A Brief History of Humankind", I wanted to make sure the user could search for "Sapiens" or "Humankind" and return the results without having to type the whole book name. For this feature, I used LIKE in SQL. LIKE let me search for results that matched a pattern, instead of being a precise match.

In "Browse Books", the user also inputs the distance they want to see books from. To do this, I first retrieved the user's school name and its latitude and longitude (from the SCHOOLS dictionary I created in the beginning). Then, for each book that matched the SQL search, I retrieved the seller's school information. I used geopy to calculate the distance between the two schools, see if the distance was within the user's specified range, and displayed/not displayed the book.

Finally, after finding the books that matched the user's search criteria, I displayed them in "results.html". I used a Bootstrap card to do this, which also allowed me to display the book's cover image, if it had one. Under each result, there is also a "Buy Book" button that submits the book's id to the server if the user clicks on it. Then, the book is marked as sold in the SQL table, and the buyer_id is updated.

There is also a "remove books" feature next to each book a user is selling. Removing a book deletes its entry from the SQL table and deletes the cover image from the ./static/cover folder. When a user buys a book, there is also an opportunity to "return book". This sets the book as not sold in the SQL database and sets the buyer_id to NULL again.

Finally, after purchasing/selling a book, the user can view the seller/buyer's contact information. The contact information is retrieved from the users SQL table and displayed on a Bootstrap jumbotron. This way, buyer/seller can coordinate pickup and payment details.
